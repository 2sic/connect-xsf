---
layout: page
title: Razor API
permalink: /components
icon: fa-code
order: 5
---

<img src="assets/logos/koi-yinyang-250.png" style="float: right">

<h3>Basic API</h3>

<details>
  <summary>
      <strong><code>Koi.Css : string</code> - current CSS framework</strong>
   </summary>

In most situations this isn't even necessary, but if you want to know what framework is currently used, just ask for <code>Koi.Css</code>. For example to debug:

{% highlight html %}
@using Connect.Koi;
<span>Currently using the @Koi.Css framework</span>
{% endhighlight %}

This will show

{% highlight html %}
<span>Currently using the bs3 framework</span>
{% endhighlight %}

</details>


<details>
  <summary>
      <strong><code>Koi.PickCss(string list, string fallback) : string</code> - CSS framework if in list</strong>
   </summary>

Sometimes you need the CSS framework code - if it's one of the frameworks you support. Here's an example: Your component has css-files for bootstrap3 and 4, and foundation 6. And your strategy is to include the Bootstrap3 version if neither of these matches. The easiest way to do this is using <code>@Koi.PickCss("bs3,bs4,fnd6", "bs3")</code> which will return either the code "bs3", "bs4", "fnd6" if it's one of those, or "bs3" if it's another or an unknown framework. 

For example:

{% highlight html %}
@using Connect.Koi;
@* include bs3 styles if unknown *@
@Koi.IfUnknown("<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>")

@* include our optimized css file for each scenario *@
<link rel='stylesheet' href='@(Koi.PickCss("bs3,bs4,fnd6", "bs3")).css'>
{% endhighlight %}

<em>Note that this requires Connect.Koi version 1.01</em>

</details>

<details>
  <summary>
      <strong><code>Koi.IsUnknown : bool</code> - detect an unknown / undefined framework</strong>
   </summary>

If the skin doesn't publish what it has, then <code>Koi.Css</code> will return <code>unk</code> for <em>unknown</em>. But in most cases, you'll actually have something in mind - so the most common commands will be:

{% highlight html %}
@using Connect.Koi;
<span>@(Koi.IsUnknown ? "unknown" : "it's known!")</span>
{% endhighlight %}

This will show <em>unknown</em> or <em>it's known!</em> depending on the situation. But there's more.

</details>
<p></p>
<h3>General Html API</h3>



<details>
  <summary>
      <strong><code>@Koi.If(key, trueString [, falseString]) : HtmlString</code> - choose a value</strong>
   </summary>

   Use <code>@Koi.If</code> to return a value (or an alternative): 
{% highlight html %}
@using Connect.Koi;
<span>Bootstrap3 status is @Koi.If("bs3", "true", "false")</span>
{% endhighlight %}

<em>Note that you won't use this a lot, because of more helpers - read on.</em>

</details>


<details>
  <summary>
      <strong><code>@Koi.IfUnknown(trueString [, falseString]) : HtmlString</code> - output if not known</strong>
   </summary>

This syntax is used to explicitly insert something if we have an unknown framework - for example, to include Bootstrap3 if we just don't know what's included:

{% highlight html %}
@using Connect.Koi;
@Koi.IfUnknown("<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>")
{% endhighlight %}

</details>


<p>
</p>

<h3>API to create <code>class</code> attributes</h3>


<details>
  <summary>
      <strong>Manually Coding the a Class Attribute (not recommended)</strong>
   </summary>

This manual way is included for those wanting more control - later on I'll show the most efficient way to do the same.

{% highlight html %}
@using Connect.Koi;
@{
  var mainDivClass = "ga-albums";
  var innerDivClass = "ga-album sc-element";
  switch(Koi.Css) {
    case "bs3":
      mainDivClass += "row";
      innerDivClass += "col-xs-6 col-sm-4 col-md-4 col-lg-4";
      break;
    case "bs4":
      mainDivClass += "row4";
      innerDivClass += "col-xs-6 col-sm-4 col-md-4 col-lg-4";
      break;
    default: // unknown or any other one
      mainDivClass = "row";
      innerDivClass += "col-xs-6 col-sm-4 col-md-4 col-lg-4";
  }
}
<div class="@mainDivClass")>
  @foreach (var album in AsDynamic(Data["Default"]))
  {
    <div class="@innerDivClass">
        ...
    </div>
  }
</div>
{% endhighlight %}

</details>

<details>
  <summary>
      <strong><code>@Koi.Class(stringFormula) : HtmlString</code> (recommended)</strong>
   </summary>

Now here's the probably easiest way to build such a class attribute:

{% highlight html %}
<div @Koi.Class("all='ga-albums' bs3,unk='row' bs4='row4'")>
</div>
{% endhighlight %}

This does the same as above, basically containing the rules like:

<ol>
  <li><code>all</code> frameworks get the class <em>ga-albums</em></li>
  <li>bootstrap 3 <code>bs3</code> will also get <em>row</em> added</li>
  <li>bootstrap 4 <code>bs4</code> will get <em>row4</em> added</li>
  <li>in case the framework is unknown <code>unk</code>, it'll do the same thing as bootstrap 3</li>
</ol>

<p>Further down you'll see exactly what the syntax looks like.</p>

</details>


<p>&nbsp;</p>


<h3>The keys in <code>@Koi.If(...)</code>, <code>@Koi.Is(...)</code></h3>

Whenever you check for keys - like <code>@Koi.If("bs3", "it's bs3", "it's not bs3")</code> the command supports multiple keys. So you can write the following: 

<ul>
  <li><code>@Koi.Is("bs3")</code></li>
  <li><code>@Koi.Is("bs3,bs4")</code></li>
  <li><code>@Koi.Is("bs3,bs4,fnd6")</code></li>
</ul>



<h3>The formula used in <code>@Koi.Class</code></h3>

The QuickFormula is what you'll use most, whenever you use <code>@Koi.Class(...)</code>. Here some basic examples:

<ul>
  <li><code>bs3='row-m'</code></li>
  <li><code>bs3='row-m color5' bs4='row-xs color5'</code></li>
  <li><code>all='color5' bs3='row' bs4='row-xs'</code></li>
  <li><code>all='color5' bs3,bs4,unk='row' fnd6='fd-xyz'</code></li>
</ul>

Here's the formula setup:

<ul>
  <li>the formula can contain many parts</li>
  <li>each part has the pattern keys='values'</li>
  <li>keys can be one or more css-framework names, so <code>bs3</code> is valid, as well as <code>bs3,bs4,fnd6</code></li>
  <li>you can also use the keys <code>all</code> for parts which should always be included</li>
  <li>or <code>unk</code> in case the framework is unknown, because the theme doesn't publish the css-framework it uses</li>
</ul>

